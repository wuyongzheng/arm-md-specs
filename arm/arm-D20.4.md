## D20.4 Taking error exceptions

RVXFYS

RHWVPC

RSYQGN

IYRSKT

RVLFTP

DTSYLW

DNBSFD

For an error signaled on a non-speculative instruction fetch or a translation table walk or hardware update of translation tables for an instruction fetch:

- If FEAT\_DoubleFault is implemented, then the Error exception is taken as a synchronous Instruction Abort exception.
- Otherwise, it is IMPLEMENTATION DEFINED whether an Error exception on these accesses is taken as a synchronous External Abort exception or as an asynchronous SError exception.

Other than for the IMPLEMENTATION SPECIFIC cases described below, if FEAT\_ANERR is implemented and the Effective value of SCTLR2\_ELx.EnANERR is 0b0 , an error signaled on a load from Normal memory is handled precisely and synchronously.

It is IMPLEMENTATION SPECIFIC whether SCTLR2\_ELx.EnANERR applies to memory reads generated by each of the following:

- If FEAT\_LSE is implemented, LD&lt;OP&gt; , SWP , and CAS{P} atomic instructions that return a value to the PE.
- If FEAT\_LS64\_V is implemented, LD64B and ST64BV{0} instructions that return a value to the PE.
- If FEAT\_SME is implemented:
- -SIMD&amp;FP register loads when the PE is in Streaming SVE mode.
- -SVE register loads when the PE is in Streaming SVE mode.
- -SMEregister loads.
- If FEAT\_THE is implemented, RCW* instructions that return a value to the PE.
- If FEAT\_NV2 is implemented, a memory read that is generated as a result of HCR\_EL2.NV2 transforming an MRS or MRRS instruction to a load, and the target memory type is not Normal Inner and Outer Write-back cacheable.

This applies to exceptions taken from both AArch64 and AArch32 Execution states.

Other than for the IMPLEMENTATION SPECIFIC cases described below, if FEAT\_ADERR is implemented and the Effective value of SCTLR2\_ELx.EnADERR is 0b0 , an error signaled on a load from Device memory is handled precisely and synchronously.

It is IMPLEMENTATION SPECIFIC whether SCTLR2\_ELx.EnADERR applies to memory reads generated by each of the following:

- SIMD&amp;FP register loads.
- If FEAT\_LSE is implemented, LD&lt;OP&gt; , SWP , and CAS{P} atomic instructions that return a value to the PE.
- IF FEAT\_SVE is implemented, SVE register loads.
- If FEAT\_LS64\_V is implemented, LD64B and ST64BV{0} instructions that return a value to the PE.
- If FEAT\_SME is implemented, SME register loads.
- If FEAT\_THE is implemented, RCW* instructions that return a value to the PE.
- If FEAT\_NV2 is implemented, a memory read that is generated as a result of HCR\_EL2.NV2 transforming an MRS or MRRS instruction to a load.

This applies to exceptions taken from both AArch64 and AArch32 Execution states.

For an error signaled on a fetch of GPT information to check an access, the Error exception generates a synchronous External abort on GPT fetch, which is taken as a GPC exception. For more information see GPC faults.

Unless otherwise stated, it is IMPLEMENTATION DEFINED whether an Error exception is handled precisely and synchronously, or handled asynchronously for each non-speculative:

- Explicit memory access made by an instruction.
- Cache maintenance operation.
- If FEAT\_MTE is implemented, access to an Allocation Tag in memory made by an instruction.
- Translation table walk or hardware update of translation tables for a memory access made by an instruction.

In this section, Handled precisely and synchronously means:

- If an access is due to any Active element of an SVE non-fault vector load instruction, or an Active element that is not the First active element of an SVE First-fault vector load instruction, then the error is reported in the FFR.
- Otherwise, the error generates a precise synchronous Data Abort exception.

In this section, Handled asynchronously means:

- If an access is due to any Active element of an SVE non-fault vector load instruction or an Active element that is not the First active element of an SVE First-fault vector load instruction, then the error is not reported in the FFR.

- The error generates an asynchronous SError exception.

RCLFJM All Error exceptions generated by speculative memory accesses are taken as an asynchronous SError exception.

RWFNJG When an Error exception is taken as an asynchronous SError exception, the exception is taken in finite time.

RBCXKN When any of the following exceptions are taken, the PE records the PE error state in the exception syndrome register:

- Asynchronous External abort taken to AArch64 state.
- An SError exception taken to either AArch32 or AArch64 state.

RTYVYR When a synchronous External abort is taken to AArch32 state, the PE does not record the PE error state.

IGGCQQ The exception type and target Execution state determine the set of PE error state values the PE can record.

IWSYXB The recorded PE error state informs software whether software can recover execution and, if so, whether any action by the recovery software to locate and repair the error is necessary first.

ITRWXF Other than as described by IWBVYC, the PE error state recorded in the exception syndrome register describes the recovery of the PE state only. For example, the PE state might be recoverable when the state of system is such that system-level recovery is not possible. See also IZQRGL.

INFDSM Software is only able to successfully recover execution and make progress from a restart address for the exception by executing an Exception Return instruction to branch to the instruction at this restart address if all of the following are true:

- The error has not been silently propagated by the PE.
- At the point when the Exception Return instruction is executed, the PE state and memory system state are consistent with the PE having executed all of the instructions up to but not including the instruction at the restart address, and none afterwards. That is, at least one of the following restart conditions is true:
- -The error has been not architecturally consumed by the PE and infected the PE state.
- -Executing the instruction at the restart address will not consume the error and will correct any corrupt state by overwriting it with the correct value or values.

RDCKHJ On taking an Error exception, the PE determines that software is able to recover execution at the point where the exception is taken, with no additional action from software, if and only if all of the following are true:

- The error has not been silently propagated by the PE.
- The restart conditions are met because all of the following are true:
- -Either the error does not remain latent or executing the instruction at the restart address will not consume the error and will correct any corrupt PE state.
- -The restart address is the preferred return address for the exception.
- The PE has not elected to determine that software is not able to recover execution, and has not elected to determine that software is able to recover execution if software takes action to locate and repair the error.

RJBHWY On taking an Error exception, the PE determines that software is able to recover execution if software takes action to locate and repair the error, to get the PE state and memory system state into this consistent state before attempting recovery, if and only if all the following are true:

- The error has not been silently propagated by the PE.
- The restart conditions can be met because the restart address is the preferred return address for the exception and at least one of the following is true:
- -The error remains latent and executing the instruction at the restart address will access the corrupt state. If the error is removed then executing the instruction at the restart address will correct any corrupt PE state and/or corrupt memory state. For example, the instruction at the restart address is a load that will consume the error and corrupts PE state.
- -The error does not remain latent and the PE has elected to determine that software is able to recover execution if software takes action to locate and repair the error.
- -Executing the instruction at the restart address will not consume the error and the PE has elected to determine that software is able to recover execution if software takes action to locate and repair the error.
- The PE has not elected to determine that software is not able to recover execution.

RGJQWN

IXMCCR

IRHPPV

IRLQVJ

On taking an Error exception, the PE determines that software is not able to recover execution if and only if one or more of the following are true:

- The error has been silently propagated by the PE.
- The restart conditions cannot be met even if software takes action to locate and repair the error. This is because at least one of the following is true:
- -The error remains latent and executing the instruction at the restart address will consume the error and corrupt PE state. Either the error cannot be removed or executing the instruction at the restart address will not correct any corrupt PE state.
- -The restart address is not the preferred return address for the exception.
- The PE has elected to determine that software is not able to recover execution.

That the PE determines that software is able to recover execution if software takes action to locate and repair the error does not mean that software can locate and repair the error. For example, the error in memory might be one which cannot be located or cannot be repaired. See IZQRGL.

Error recovery software might instead make the PE state and memory system state consistent with an alternative execution of the program.

Example D20-13

An Error exception is generated by a load from a location in a clean page of memory that is infected by an error. Software might be able to repair the error by:

- Reloading the page from a backing store. This makes the memory system state consistent with the uncorrupted view. Executing the instruction at the restart address will load the uncorrupted value into the PE state.
- Invalidating the clean page and marking it page as inaccessible. Executing the instruction at the restart address will result in a Translation fault being generated when the program tries to access the page. The target of the load will contain an UNKNOWN value, which is permitted by the architecture. The MMU fault handler can then reload the page from the backing store, as it would for a page that has not been previously accessed or has been paged out.

Either approach might result in the virtual address to physical address mapping for the page being changed by software, meaning the memory system state is not consistent with the previously executed instructions. However, the memory system state is consistent with a valid alternative view of the execution of the program that allows software to recover execution.

This recovery is only possible if the error can be isolated to a location.

APEmight include additional IMPLEMENTATION DEFINED mechanisms to aid software locate and repair the error. If software has to use IMPLEMENTATION DEFINED mechanisms to locate and repair the error, then the PE reports that it has determined that software is not able to recover execution. The PE might use IMPLEMENTATION DEFINED additional syndrome registers to report that software is able to recover execution if software takes action to locate and repair the error using the IMPLEMENTATION DEFINED mechanisms.

See also:

- PE error state recording in the exception syndrome.
- PE error state classification.

## D20.4.1 PE error state recording in the exception syndrome

RWPKYM

When an asynchronous SError exception is taken to AArch64 state, the PE records the PE error state in the ESR\_ELx exception syndrome register as the applicable one of:

- Uncontainable (UC).
- Unrecoverable state (UEU).
- Recoverable state (UER).
- Restartable state (UEO).
- Corrected (CE).
- Uncategorized error.
- IMPLEMENTATION DEFINED syndrome.

ISDDLL

RZSKKG

RPWKBL

IQVVSM

When an asynchronous SError exception is taken to AArch64 state:

- Uncategorized error is recorded by setting ESR\_ELx.ISS to zero. This includes setting ESR\_ELx.IDS and ESR\_ELx.DFSC to zero.
- IMPLEMENTATION DEFINED syndrome is recorded by setting ESR\_ELx.IDS to 0b1 . The remainder of the ESR\_ELx.ISS syndrome is IMPLEMENTATION DEFINED.

Other values for the PE error state are recorded in ESR\_ELx.AET, by setting ESR\_ELx.IDS to 0b0 and ESR\_ELx.DFSC to the applicable nonzero fault status code, indicating ESR\_ELx.AET is valid.

If FEAT\_RASv2 is implemented and any of the following are true, then an error exception is taken as an SError exception:

- The error has been silently propagated by the PE.
- The PE determines that software is not able to recover execution from the preferred return address of the exception.

RFKHHF When a synchronous External abort exception is taken to AArch64 state, the PE records the PE error state in ESR\_ELx.SET as the applicable one of the following:

- If FEAT\_RASv2 is not implemented, Uncontainable (UC).
- Recoverable state (UER).
- Restartable state (UEO).

Other values for the PE error state are not supported by synchronous External abort exceptions taken to AArch64 state.

When an asynchronous SError exception is taken to AArch32 state, the PE records the PE error state in DFSR.AET or HSR.AET as appropriate, as the applicable one of:

- Uncontainable (UC).
- Unrecoverable state (UEU).
- Recoverable state (UER).
- Restartable state (UEO).

Other values for the PE error state are not supported by asynchronous SError exceptions taken to AArch32 state.

Table D20-1 summarizes the supported PE error state syndrome values for each type of Error exception.

Table D20-1 Summary of Error exception types and supported PE error state syndrome values

| PE error state                                 | External abort to AArch64 state   | SError exception to AArch64 state   | External abort to AArch32 state   | SError exception to AArch32 state   |
|------------------------------------------------|-----------------------------------|-------------------------------------|-----------------------------------|-------------------------------------|
| Recorded in:                                   | ESR_ELx.SET                       | ESR_ELx.AET                         | No syndrome                       | DFSR.AET                            |
| Uncategorized error                            | No                                | Yes (ISS==0)                        | -                                 | No                                  |
| IMPLEMENTATION DEFINED syndrome                | No                                | Yes (IDS==1)                        | -                                 | No                                  |
| Uncontainable (UC), FEAT_RASv2 implemented     | No                                | Yes ( 0b000 )                       | -                                 | Yes ( 0b00 )                        |
| Uncontainable (UC), FEAT_RASv2 not implemented | Yes ( 0b10 )                      | Yes ( 0b000 )                       | -                                 | Yes ( 0b00 )                        |
| Unrecoverable state (UEU)                      | No                                | Yes ( 0b001 )                       | -                                 | Yes ( 0b01 )                        |
| Recoverable state (UER)                        | Yes ( 0b00 )                      | Yes ( 0b011 )                       | -                                 | Yes ( 0b11 )                        |
| Restartable state (UEO)                        | Yes ( 0b11 )                      | Yes ( 0b010 )                       | -                                 | Yes ( 0b10 )                        |

| PE error state   | External abort to AArch64 state   | SError exception to AArch64 state   | External abort to AArch32 state   | SError exception to AArch32 state   |
|------------------|-----------------------------------|-------------------------------------|-----------------------------------|-------------------------------------|
| Deferred (DE)    | No                                | No                                  | -                                 | No                                  |
| Corrected (CE)   | No                                | Yes ( 0b110 )                       | -                                 | No                                  |

## D20.4.2 PE error state classification

ICCKWK

RQKZLB

RQGNYD

The PE determines which PE error state to record based on the following criteria:

- The PE error state syndrome values supported by the type of Error exception being taken. See PE error state recording in the exception syndrome.
- The following IMPLEMENTATION SPECIFIC properties and behaviors of the PE on taking the exception:
- -Whether the error has been silently propagated by the PE.
- -Whether the PE determines that software is able to recover execution at the point where the exception is taken.
- -If the PE determines that software can recover execution, whether software needs locate and repair the error before attempting to recover. If software does not locate and repair the error, then attempting to recover execution might cause the Error exception to be generated again.
- -If the PE determines that software cannot recover execution, whether the error is a synchronizable error.
- Whether the implementation elects to record the PE error state as another state. The PE only does this when the criteria for the other, recorded state are met. The conditions under which the PE elects to record the PE error state as another state are IMPLEMENTATION DEFINED.

The recorded PE error state is defined by the rules in this section.

If and only if all of the following are true, then on taking an Error exception the PE error state is recorded as Uncontainable (UC):

- One or more of the following are true:
- -The error has been silently propagated by the PE.
- -The PE determines that software is not able to recover execution from the preferred return address of the exception and the error is not a synchronizable error.
- -The PE determines that software is not able to recover execution from the preferred return address of the exception and the Error exception is taken as a synchronous External abort to AArch64 state. (That is, the type of Error exception does not support reporting the PE error state as Unrecoverable state (UEU).)
- -The implementation has elected to record the PE error state as Uncontainable (UC).
- The Error exception is not taken as a synchronous External abort to AArch32 state.
- Either FEAT\_RASv2 is not implemented, or the Error exception is not taken as a synchronous External abort to AArch64 state.
- The implementation has not elected to record the PE error state as IMPLEMENTATION DEFINED syndrome or Uncategorized error, or the type of Error exception does not support reporting the PE error state as IMPLEMENTATION DEFINED syndrome or Uncategorized error.

If and only if all of the following are true, then on taking an Error exception the PE error state is recorded as Unrecoverable state (UEU):

- The error has not been silently propagated by the PE.
- The Error exception is taken as an SError exception.
- One or more of the following are true:
- -The PE determines that software is not able to recover execution from the preferred return address of the exception and the error is a synchronizable error.
- -The implementation has elected to record the PE error state as Unrecoverable state (UEU).
- The implementation has not elected to record the PE error state as Uncontainable (UC), IMPLEMENTATION DEFINED syndrome, or Uncategorized error.

IFJCZP

Error synchronization event defines synchronizable error.

RJHNVT

If and only if all of the following are true, then on taking an Error exception the PE error state is recorded as Recoverable state (UER):

- The error has not been silently propagated by the PE.
- The Error exception is not taken as a synchronous External abort to AArch32 state.
- The PE determines that software is able to recover execution from the preferred return address of the exception.
- One or more of the following are true:
- -The PE determines that software must take action to locate and repair the error to successfully recover execution. This might be because the exception was taken before the error was architecturally consumed by the PE, at the point when the PE was not be able to make correct progress without either consuming the error or otherwise making the state of the PE unrecoverable.
- -The implementation has elected to record the PE error state as Recoverable state (UER).
- The implementation has not elected to record the PE error state as Unrecoverable state (UEU), Uncontainable (UC), IMPLEMENTATION DEFINED syndrome, or Uncategorized error.

RMBVCF If and only if all of the following are true, then on taking an Error exception the PE error state is recorded as Restartable state (UEO):

- The error has not been silently propagated by the PE.
- The Error exception is not taken as a synchronous External abort to AArch32 state.
- The PE determines that software can recover execution from the preferred return address of the exception without the need for software to take action to locate and repair the error first.
- One or more of the following are true:
- -The error is an uncorrected error. This includes a deferred error.
- -The error is a corrected error and the Error exception is not taken as an SError exception taken to AArch64 state.
- -The implementation has elected to record the PE error state as Restartable state (UEO).
- The implementation has not elected to record the PE error state as any of Recoverable state (UER), Unrecoverable state (UEU), Uncontainable (UC), IMPLEMENTATION DEFINED syndrome, or Uncategorized error.
- RLFXRD If and only if all of the following are true, then on taking an Error exception the PE error state is recorded as Corrected (CE):
- The error has been corrected and not silently propagated by the PE.
- The Error exception is taken as an SError exception taken to AArch64 state.
- Software can recover execution from the preferred return address of the exception. Because the error has been corrected, software does not need to take action to locate and repair the error.
- The implementation has not elected to record the PE error state as any other type.
- IBWPJZ Arm strongly recommends that a corrected error that is not silently propagated does not generate any Error exception at the PE. The producer of the data that corrected the error might still record the error in a RAS error record, and generate a fault handling interrupt, as described in the Arm Â® Reliability, Availability, and Serviceability (RAS) System Architecture, for A-profile architecture (ARM IHI 0100).
- RNZYRP If and only if all the following are true, then on taking an Error exception the PE error state is recorded as an Uncategorized error:
- The Error exception is taken as an asynchronous SError exception taken to AArch64 state.
- The implementation has elected to record the PE error state as an Uncategorized error.
- RVHWHD If and only if all the following are true, then on taking an Error exception the PE error state is recorded as an IMPLEMENTATION DEFINED syndrome:
- The Error exception is taken as an asynchronous SError exception taken to AArch64 state.
- The implementation has elected to record the PE error state as an IMPLEMENTATION DEFINED syndrome.
- ISRPJD The IMPLEMENTATION DEFINED syndrome type might provide additional IMPLEMENTATION DEFINED syndrome recorded in the exception syndrome register. Software might be able to determine the state of the PE from this syndrome, or other IMPLEMENTATION DEFINED syndrome registers.
- IWLZRP Uncategorized error and IMPLEMENTATION DEFINED syndrome are defined for backward compatibility with previous versions of the architecture. Arm does not recommend use of these PE error state values in new implementations that include other RAS features.

IVKMZB

IZQRGL

IWBVYC

ITXFMY

ITGPQZ

The PE error states for an Error exception generated when the PE consumes an uncorrected error are summarized by Figure D20-1. Figure D20-1 assumes the type of Error exception supports the resulting PE error state, that the error was neither corrected nor deferred, and the PE never elects to record an error as a different PE error state when permitted, an Uncategorized error syndrome, or an IMPLEMENTATION DEFINED syndrome.

Figure D20-1 PE error states

<!-- image -->

If the PE error state reports that software can recover execution, or that software isolation might be possible because the error is a synchronizable error, then this does not necessarily mean that the error can be recovered from because the error in the system might be one which does not allow software to recover the operation. Rather, software might be able to recover if it can repair the error and continue.

Example D20-14

A component detects an error when accessed by a PE, and records in a RAS System Architecture node that the error is uncontainable at the component, meaning the system has to be shut down to avoid catastrophic failure.

The component signals the error with an in-band error response to a PE, which does not report the severity of the error. The recorded PE error state refers only to the PE, not the system error state.

If the in-band error response can signal the severity of the error to the PE, then the PE might use this information to elect to report the PE error state as the severity of error reported to it, if permitted by the preceding rules.

However, this is not required, and software must not rely on this behavior and should determine from the system whether the error is recoverable at the system level.

Example D20-15

Aprocessor cache detects an uncontainable tag RAM error, and the PE reports the PE error state as Uncontainable (UC), even though the state of the PE itself is Recoverable state (UER). RQKZLB allows this.

An SError exception that is masked when it is generated remains pending until taken later when no longer masked. In these cases, the PE error state is also unlikely to be Restartable or Recoverable , and if FEAT\_RASv2 is implemented, is reported with ESR\_ELx.ELS set to ' 0b0 '.

See also:

- PE error propagation.
- Error synchronization event.

SXSKNS

SHYWFL

SLSFYM

SGLPZY

SGRZQS

DLVGRB

RTHPSG

RJZCNK

## D20.4.2.1 Using the PE error state classification

When the PE error state is recorded as Uncontainable (UC):

- The error handling software must assume that either:
- -The error has been silently propagated by the PE.
- -Software is not able to recover execution from the preferred return address of the exception and the error was not a synchronizable error.
- If the error handling software cannot isolate the error to an application or VM, or both, by other means, then the system must be shut down by software to avoid catastrophic failure.

When the PE error state is recorded as Unrecoverable state (UEU):

- The error handling software can assume the error has not been silently propagated by the PE.
- The error handler cannot safely recover execution from the preferred return address of the exception, even if it takes action to locate and repair the error. The state of the affected software, or both, is unrecoverable. However, if the software includes Error synchronization events, the error handler can use the properties of the Error synchronization event to determine which software is affected by the error.
- The affected software cannot continue and must be isolated by the error handling software.

When the PE error state is recorded as Recoverable state (UER):

- The uncorrected error might remain latent in the system.
- If the error handling software takes action to locate and repair the uncorrected error, then the error handler can safely recover execution from the preferred return address of the exception. Otherwise on restart of the affected software the PE might attempt to consume the error again, causing a further Error exception. If the error handler cannot locate and repair the error, then the affected software must be isolated by the error handling software.

When the PE error state is recorded as Restartable state (UEO):

- The error might remain latent in the system.
- The error handling software might take action to locate and repair the error before it is consumed. However, the affected software can be safely restarted by the error handler without software taking any action to locate and repair the error.

For example, the error was signaled when the PE speculatively accessed corrupt data.

When the PE error state is recorded as IMPLEMENTATION DEFINED syndrome or Uncategorized error, if the error handling software is not able to determine the actual state of the PE and memory, it should treat IMPLEMENTATION DEFINED syndrome and Uncategorized error as Uncontainable (UC).

## D20.4.2.2 Recording the physical address

When FEAT\_PFAR is implemented, the address written to PFAR\_ELx.PA or MFAR\_EL3.PA on taking a synchronous External Abort or SError exception can be any address within a naturally-aligned fault granule that contains the faulting physical address.

The fault granule size is IMPLEMENTATION DEFINED and no larger than the size of the range of values permitted to be recorded in FAR\_ELx.

Note

To aid with data recovery, it is recommended that the fault granule is no larger than the error protection granule used in the system.

When FEAT\_PFAR is implemented, Execution at EL0 makes PFAR\_EL1 become UNKNOWN, and Execution at EL1 or EL0 makes PFAR\_EL2 become UNKNOWN.

## D20.4.3 Multiple SError exceptions

ICPJLW

Multiple physical and/or virtual SError exception conditions might be pending together. The architecture does not define relative priorities for asynchronous exceptions.

RDHKQZ

If multiple physical and/or virtual SError exception conditions are pending, then it is IMPLEMENTATION DEFINED whether the multiple pending SError exception conditions are taken as a single SError exception.

RJBQSC

On taking an SError exception for more than one SError condition:

- If the exception is taken to AArch64 state and one or more pending SError conditions would be reported as IMPLEMENTATION DEFINED syndrome or Uncategorized error, then the syndrome recorded in ESR\_ELx.ISS is IMPLEMENTATION DEFINED.

- Otherwise, the recorded PE error state applies recorded by combined effect of the errors.

IGNHXJ

Any pending SError conditions that are not taken with other SError exceptions as a single SError exception remains pending after the SError exception is taken.

## D20.4.4 Target Exception level for External abort and SError exceptions taken to AArch64 state

DFWSVH

This section is included for completeness. It repeats the definitions from this Manual and so is non-normative . These definitions also apply to synchronous External abort exceptions and SError exceptions taken from AArch32 state to AArch64 state.

INRZXZ

IBPGXV

The default target Exception level for synchronous External abort exceptions taken to AArch64 state is:

- EL1, if taken from EL0 or EL1.
- EL2, if taken from EL2.
- EL3, if taken from EL3.

The default target Exception level for SError exceptions taken to AArch64 state is EL1.

However:

- If EL3 is implemented and SCR\_EL3.EA is 0b1 , then the target Exception level for all SError exceptions and synchronous External abort exceptions is EL3.
- Otherwise, if EL2 is implemented and enabled in the current Security state, then:
- -If HCR\_EL2.AMO is 0b1 or HCR\_EL2.TGE is 0b1 , then the target Exception level for SError exceptions is EL2.
- -If HCR\_EL2.TEA is 0b1 or HCR\_EL2.TGE is 0b1 , then the target Exception level for synchronous External abort exceptions taken from EL0 and EL1 is EL2.

When executing in AArch64 state at a higher Exception level than the target Exception level for SError exceptions, SError exceptions are implicitly masked and not taken.

See also The AArch64 System Level Programmers' Model.

## D20.4.5 Target Exception level for External abort and SError exceptions taken to AArch32 state

DWFQWP

This section is included for completeness. It repeats the definitions from this Manual and so is non-normative .

IBMBXM

The default target mode for SError and synchronous External abort exceptions taken to AArch32 state is:

- Abort mode, if taken from EL0, EL1 or EL3, including from Monitor mode.
- Hyp mode, if taken from EL2.

## However:

- If EL3 is implemented, EL3 is using AArch32, and SCR.EA is 0b1 , then the target mode for SError exceptions and synchronous External abort exceptions is Monitor mode.
- Otherwise, if EL2 is implemented, EL2 is using AArch32, and the PE is in Non-secure state:
- -If HCR.AMO is 0b1 or HCR.TGE is 0b1 , then the target mode for SError exceptions taken from EL0 and EL1 is Hyp mode, using vector offset 0x14 .
- -If HCR.TEA is 0b1 or HCR.TGE is 0b1 , then the target mode for synchronous External abort exceptions taken from EL0 and EL1 is Hyp mode, using vector offset 0x14 .

Unless otherwise stated, vector offset 0x10 is used for SError exceptions and synchronous Data Abort exceptions, and vector offset 0x0C is used for Prefetch Abort exceptions.

ICCPMY

See also The AArch32 System Level Programmers' Model.