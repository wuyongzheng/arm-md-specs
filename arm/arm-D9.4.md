## D9.4 GPC faults

| R JWCSM   | If the GPC for an access requires use of configuration in GPCCR_EL3 or in GPCBW_EL3, and the configuration of GPCCR_EL3 or GPCBW_EL3 is invalid, then the access generates a GPT walk fault at level 0 . The configuration of GPCCR_EL3 or GPCBW_EL3 is invalid if any of the following are true: • Any field in GPCCR_EL3 is programmed to a reserved value. • Any field in GPCBW_EL3 is programmed to a reserved value when GPCCR_EL3.GPCBW is 1. • Any field in GPCCR_EL3 is programmed to an invalid value, as specified in the definition of GPCCR_EL3. • Any field in GPCBW_EL3 is programmed to an invalid value, as specified in the definition of GPCBW_EL3,   |
|-----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| R KYZMZ   | If the GPC for an access requires consumption of any field in an invalid GPT entry, then the access generates a GPT walk fault at level x , where x is the level of the invalid GPT entry.                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| R PGHWX   | If FEAT_RME_GDI is implemented, and a GPT walk needs to consume an L1 GPT entry, then the GPT walk also reads the other GPT entry that is in the same 16-byte naturally aligned region of memory. If either entry is invalid, the following occur:                                                                                                                                                                                                                                                                                                                                                                                                                      |
| I QYQPV   | In the case where a GPT walk generates a GPT walk fault at level 1 , hardware is not required to automatically invalidate any previously-cached valid descriptors from the TLB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| R XVCKY   | If the GPC for an access requires use of the configured base address in GPTBR_EL3.BADDR, and the base address exceeds the configured address size in GPCCR_EL3.PPS, then the access generates a GPT address size fault at level 0 .                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| R JCGMZ   | If the GPC for an access requires consumption of a GPT Table descriptor with an address that exceeds the value configured in GPCCR_EL3.PPS, then the access generates a GPT address size fault at level 0 .                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| R DFCHJ   | If a fetch of GPT information to check an access experiences an External abort, then the access generates a synchronous External abort on GPT fetch at level x , where x is the level of the fetch that experienced the External abort.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| R CPDSB   | If a Non-secure PA input to the GPC exceeds the PA range configured by GPCCR_EL3.PPS, then the access does not generate any GPF.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| R TCWMD   | If any of the following apply to the PA input to the GPC, the access generates a Granule protection fault at Level 0:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| R JFFHB   | • The input is a Secure PA and the Effective value of GPCCR_EL3.SPAD is 1. • The input is a Non-secure PA and the Effective value of GPCCR_EL3.NSPAD is 1. • The input is a Realm PA and the Effective value of GPCCR_EL3.RLPAD is 1. If the Effective value of GPCCR_EL3.APPSAA is 0, then when a Secure, Realm, or Root PA input to the GPC exceeds                                                                                                                                                                                                                                                                                                                   |
| R PBPSH   | If the Effective value of GPCCR_EL3.APPSAA is 1, then when a Secure, Realm, or Root PA input to the GPC exceeds the PA range configured by GPCCR_EL3.PPS, the access does not generate a GPF due to this control.                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| R DQPWS   | An access is not permitted by the GPT if it is made to a PA space not permitted according to the Granule Protection Information (GPI) value returned by the GPT lookup.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| R HDDNW   | If an access is not permitted by the GPT, then the access generates a Granule protection fault at Level x , where x is the level of the GPT entry that the access was checked against.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| R VJLXG   | Accesses are checked against the GPC configuration for the physical granule being accessed, regardless of the stage 1 and stage 2 translation configuration.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| I KLTDM   | For example, if GPCCR_EL3.PGS is configured to a smaller granule size than the configured stage 1 and stage 2 translation granule size, accesses are checked at the GPCCR_EL3.PGS granule size.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

RGMGRR

The following table shows the possible GPC faults, from highest priority to lowest priority, and the reasons they are generated:

## Table D9-2 GPC fault priority

|   Priority | Fault reported                                     | Reason                                                                                                            |
|------------|----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
|          1 | GPT walk fault at Level 0                          | The configuration of GPCCR_EL3 is invalid, or GPCCR_EL3.BW is 1 and the configuration of GPCBW_EL3 is invalid.    |
|          2 | Granule protection fault at Level 0                | An access to Secure, Non-secure, or Realm PA space is prevented by one of GPCCR_EL3.{SPAD, NSPAD, RLPAD}.         |
|          3 | Granule protection fault at Level 0                | The Effective value of GPCCR_EL3.APPSAA is 0 and a Secure, Realm, or Root physical address exceeds GPCCR_EL3.PPS. |
|          4 | GPT address size fault at Level 0                  | The base address in GPTBR_EL3.BADDR exceeds GPCCR_EL3.PPS.                                                        |
|          5 | Synchronous External abort on GPT fetch at Level 0 | An L0GPT fetch experiences an external abort.                                                                     |
|          6 | GPT walk fault at Level 0                          | An L0GPT entry is invalid.                                                                                        |
|          7 | GPT address size fault at Level 0                  | An L0GPT entry contains an address exceeding GPCCR_EL3.PPS.                                                       |
|          8 | Granule protection fault at Level 0                | An L0GPT entry forbids access.                                                                                    |
|          9 | Synchronous External abort on GPT fetch at Level 1 | An L1GPT fetch experiences an external abort.                                                                     |
|         10 | GPT walk fault at Level 1                          | An L1GPT entry is invalid.                                                                                        |
|         11 | Granule protection fault at Level 1                | An L1GPT entry forbids access.                                                                                    |