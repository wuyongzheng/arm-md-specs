## D6.7 Trace synchronization and memory barriers

| R VLWDM   | If, following a Context synchronization event CSE, the PE is executing in a Trace Prohibited region, a DSB with required access types of reads and write is executed in program order after a TSB CSYNC operation that is executed in the Trace Prohibited region in program order after CSE, then in addition to the requirements in this manual, the DSB does not complete until all explicit memory accesses of the required access type made by the trace operations synchronized by the TSB CSYNC are Complete for the set of observers in the required Shareability domain. See alsoR MPXXN .   |
|-----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| R DFHWV   | An explicit read, explicit write, translation table walk, cache maintenance operation, or TLB invalidate operationM 1 will be Observed-by a read or a writeRW 2 of a Location made by a trace operation t A relating to a traced instruction Aif all of the following are true:                                                                                                                                                                                                                                                                                                                       |
| I NLHGN   | InR DFHWV , CSE is required to allow Ato be traced as a Speculative instruction before it is Canceled or Resolved. The equivalent rule for SPE does not require CSE as SPE cannot write profiling records to memory until the profiled operation is Canceled or Resolved. See Trace of Speculative execution.                                                                                                                                                                                                                                                                                         |
| R JPPZZ   | For the indirect writes to TRBPTR_EL1 and TRBSR_ELx that are made as a result of an External abort on a write of trace data to memory, the synchronization rules apply only after the write to memory has completed.                                                                                                                                                                                                                                                                                                                                                                                  |