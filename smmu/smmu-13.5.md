## 13.5 Summary of attribute/permission configuration fields

The attributes output from the SMMU are determined as follows.

|                               | If translation occurs                                                                                                                                      | If translation occurs                                                                                                                                      | If translation occurs                                     | If bypass                                     | If bypass                                     |
|-------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|-----------------------------------------------|-----------------------------------------------|
| Attribute                     | Stage 1-only                                                                                                                                               | Stage 1 + stage 2                                                                                                                                          | Stage 2-only                                              | SMMUEN == 1 but STE.Config == 0b100           | SMMUEN == 0                                   |
| INST                          | Data, if required by the memory system.                                                                                                                    | Data, if required by the memory system.                                                                                                                    | Data, if required by the memory system.                   | Data, if required by the memory system.       | Data, if required by the memory system.       |
| PRIV                          | Privileged, if required by the memory system.                                                                                                              | Privileged, if required by the memory system.                                                                                                              | Privileged, if required by the memory system.             | Privileged, if required by the memory system. | Privileged, if required by the memory system. |
| PA space (Secure stream)      | Effective S1_TTD.NS, NSTable and CD.NSCFGx                                                                                                                 | Effective S1_TTD.NS, NSTable CD.NSCFGx and STE.{S2NSA, S2NSW, S2SA S2SW}                                                                                   | STE.NSCFG and STE.{S2NSA, S2NSW, S2SA S2SW}               | STE.NSCFG                                     | SMMU_S_GBPA .NSCFG                            |
| PA space (Realm stream)       | EL1: Fixed, Realm PA space. EL2 or EL2-E2H: S1_TTD.NS                                                                                                      | S2_TTD.NS                                                                                                                                                  | S2_TTD.NS                                                 | STE.NSCFG                                     | Transaction aborted                           |
| PA space (Non- secure stream) | Fixed, Non-secure PA space                                                                                                                                 | Fixed, Non-secure PA space                                                                                                                                 | Fixed, Non-secure PA space                                | Fixed, Non-secure PA space                    | Fixed, Non-secure PA space                    |
| MT                            | CD.MAIR[ S1_TTD.AttrIndx]                                                                                                                                  | Combine( CD.MAIR[ S1_TTD.AttrIndx], S2_TTD.MemAttr, STE.S2FWB)                                                                                             | Combine(STE. {MemAttr, MTCFG}, S2_TTD.MemAttr, STE.S2FWB) | STE. {MemAttr, MTCFG}                         | SMMU_(S_) GBPA. {MemAttr, MTCFG}              |
| RA, WA, TR                    | CD.MAIR[ S1_TTD.AttrIndx], if STE.{MemAttr, MTCFG} provide any-Device or NC input to Stage 1, otherwise: Combine( STE.ALLOCCFG, CD.MAIR[ S1_TTD.AttrIndx]) | CD.MAIR[ S1_TTD.AttrIndx], if STE.{MemAttr, MTCFG} provide any-Device or NC input to Stage 1, otherwise: Combine( STE.ALLOCCFG, CD.MAIR[ S1_TTD.AttrIndx]) | Combine( STE.ALLOCCFG, S2_TTD.MemAttr)                    | STE.ALLOCCFG                                  | SMMU_(S_) GBPA. ALLOCCFG                      |
| SH                            | S1_TTD.SH                                                                                                                                                  | Combine ( S1_TTD.SH, S2_TTD.SH)                                                                                                                            | Combine ( STE.SHCFG S2_TTD.SH)                            | STE.SHCFG                                     | SMMU_(S_) GBPA.SHCFG                          |

Notes:

- Permission checking of InD and PnU against translation descriptor fields is not shown here.
- References to INSTCFG, PRIVCFG, NSCFG, MTCFG/MemAttr and ALLOCCFG refer to the effective output of these override fields, which might always be the incoming attribute depending on SMMU\_IDR1.ATTR\_PERMS\_OVR and SMMU\_IDR1.ATTR\_TYPES\_OVR. This table does not show the effect of one field on another field. For example, the configuration used to determine allocation/transient hints or Shareability is irrelevant if the MemType is of any-Device type. See section 16.7.5 SMMU and AMBA attribute differences for other interconnect-specific dependencies between attributes.
- (a): If stage 2 translation is enabled, and STE.S2FWB==1, the Combine() operation for memory is instead an override operation for some values of the stage 2 MemAttr field.